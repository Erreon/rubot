require "rubygems"
require "fileutils"

unless ARGV[0]
  puts "usage is: rubot <project_name>"
  exit!
end

if Dir.exist? ARGV[0]
  puts "directory '#{ARGV[0]}' already exists"
  exit
end

# there has to be a better way to do this
# why does gem documentation suck so back? (don't pay attention to rubot docs, shh)
spec = Gem.searcher.find("rubot")
template_dir = File.join(spec.installation_path, "gems", spec.full_name, "lib", "template")

FileUtils.cp_r(template_dir, ARGV[0])
# for some reason gem doesn't include empty folders during the install
# this is to make sure these directories exist
%w{resources commands listeners runners}.each do |dir|
  FileUtils.mkdir File.join(ARGV[0], dir) unless File.exist? File.join(ARGV[0], dir)
end